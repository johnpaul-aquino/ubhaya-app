<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ubhaya - Shipment Tracking</title>
    <link rel="stylesheet" href="../assets/style.css">
    <style>
        .shipment-stats {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .shipment-stat {
            background: white;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #e5e7eb;
        }

        .shipment-stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .shipment-stat-label {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .filter-pills {
            display: flex;
            gap: 12px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .filter-pill {
            padding: 8px 16px;
            border-radius: 999px;
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-weight: 500;
        }

        .filter-pill:hover {
            background: #e5e7eb;
            border-color: #6B46C1;
        }

        .filter-pill.active {
            background: #6B46C1;
            color: white;
            border-color: #6B46C1;
        }

        .shipment-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .shipment-detail-modal.active {
            display: flex;
        }

        .modal-content-detail {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #f3f4f6;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: #e5e7eb;
        }

        .shipment-timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline-step {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            position: relative;
        }

        .timeline-step:not(:last-child)::after {
            content: '';
            position: absolute;
            left: 20px;
            top: 50px;
            width: 2px;
            height: 30px;
            background: #e5e7eb;
        }

        .timeline-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f3f4f6;
            border: 2px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 1.25rem;
        }

        .timeline-step.completed .timeline-dot {
            background: #22c55e;
            border-color: #22c55e;
            color: white;
        }

        .timeline-step.active .timeline-dot {
            background: #6B46C1;
            border-color: #6B46C1;
            color: white;
        }

        .timeline-content {
            padding-top: 5px;
        }

        .timeline-title {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .timeline-description {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 4px;
        }

        .timeline-time {
            color: #9ca3af;
            font-size: 0.75rem;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .stat-box {
            background: #f9fafb;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .stat-box-label {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .stat-box-value {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
        }

        .detail-section {
            margin-bottom: 24px;
        }

        .detail-label {
            color: #6B46C1;
            font-weight: 600;
            font-size: 0.875rem;
            text-transform: uppercase;
            margin-bottom: 12px;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }

        .status-timeline-info {
            background: #f0f9ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
        }

        .status-timeline-info strong {
            color: #1e40af;
        }

        .shipment-row {
            cursor: pointer;
        }

        .shipment-row:hover {
            background: #f9fafb;
        }
    </style>
</head>
<body>
    <!-- Top Navigation Bar -->
    <div class="topbar">
        <div class="logo">Ubhaya</div>
        <div class="topbar-nav">
            <div class="search-bar">
                <span class="search-icon">üîç</span>
                <input type="text" class="search-input" placeholder="Search anything...">
            </div>
            <a href="#" class="btn btn-icon">üîî</a>
            <div class="user-menu">
                <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #6B46C1, #9333EA); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; flex-shrink: 0;">JD</div>
                <span>John Doe</span>
            </div>
            <a href="login.html" class="btn btn-sm btn-outline">Logout</a>
        </div>
    </div>

    <div class="page-wrapper">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <ul class="sidebar-nav">
                <li><a href="index.html">üè† Dashboard</a></li>
                <li><a href="facilities.html">üîç Facilities</a></li>
                <li><a href="shipments.html" class="active">üì¶ Shipments</a></li>
                <li><a href="contacts.html">üë• Contacts</a></li>
                <li><a href="calculator.html">üìä Shipping Calculator</a></li>
                <li><a href="documents.html">üìÅ Documents</a></li>
                <li><a href="team.html">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Team</a></li>
                <li><a href="#">‚öôÔ∏è Settings</a></li>
            </ul>

            <!-- Filter Sidebar Section -->
            <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #e5e7eb;">
                <h4 style="margin-bottom: 16px; color: #6b7280; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">Quick Filters</h4>
                <div class="filter-pills">
                    <button class="filter-pill active" onclick="filterShipments('all')">
                        <span>üè†</span> All
                    </button>
                    <button class="filter-pill" onclick="filterShipments('today')">
                        <span>‚è∞</span> Today
                    </button>
                    <button class="filter-pill" onclick="filterShipments('delayed')">
                        <span>‚ö†Ô∏è</span> Delayed
                    </button>
                    <button class="filter-pill" onclick="filterShipments('high-priority')">
                        <span>üî¥</span> High Priority
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Page Header -->
            <div class="mb-xl">
                <h1>Shipment Tracking</h1>
                <p class="text-muted">Monitor and manage all your incoming and outgoing shipments in real-time</p>
            </div>

            <!-- Shipment Stats -->
            <div class="shipment-stats">
                <div class="shipment-stat">
                    <div class="shipment-stat-value" style="color: #6B46C1;">24</div>
                    <div class="shipment-stat-label">Total Active</div>
                </div>
                <div class="shipment-stat">
                    <div class="shipment-stat-value" style="color: #2563EB;">15</div>
                    <div class="shipment-stat-label">Incoming</div>
                </div>
                <div class="shipment-stat">
                    <div class="shipment-stat-value" style="color: #22c55e;">9</div>
                    <div class="shipment-stat-label">Outgoing</div>
                </div>
                <div class="shipment-stat">
                    <div class="shipment-stat-value" style="color: #f59e0b;">3</div>
                    <div class="shipment-stat-label">Arriving Today</div>
                </div>
                <div class="shipment-stat">
                    <div class="shipment-stat-value" style="color: #ef4444;">2</div>
                    <div class="shipment-stat-label">Delayed</div>
                </div>
            </div>

            <!-- Tabs Section -->
            <div class="card">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('incoming')">üì• Incoming Shipments</button>
                    <button class="tab" onclick="switchTab('outgoing')">üì§ Outgoing Shipments</button>
                </div>

                <!-- Search and Sort Bar -->
                <div style="display: flex; gap: 16px; margin-bottom: 24px;">
                    <div class="search-bar" style="flex: 1;">
                        <span class="search-icon">üîç</span>
                        <input type="text" class="search-input" id="shipmentSearch" placeholder="Search by shipment number or route...">
                    </div>
                    <select class="form-select" id="sortBy" style="width: 200px;">
                        <option>üìÖ Arriving by Date</option>
                        <option>üî§ Shipment Number</option>
                        <option>üìç Origin</option>
                        <option>‚≠ê Priority</option>
                    </select>
                    <button class="btn btn-outline" onclick="applyFilters()">Filter</button>
                </div>

                <!-- Incoming Shipments Tab -->
                <div id="incoming-tab" class="tab-content active">
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Number</th>
                                    <th>Route</th>
                                    <th>Status</th>
                                    <th>Priority</th>
                                    <th>Departure</th>
                                    <th>ETA</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="incomingTable">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Outgoing Shipments Tab -->
                <div id="outgoing-tab" class="tab-content">
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Number</th>
                                    <th>Route</th>
                                    <th>Status</th>
                                    <th>Priority</th>
                                    <th>Departure</th>
                                    <th>ETA</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="outgoingTable">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Add New Shipment Button -->
            <div style="position: fixed; bottom: 32px; right: 32px;">
                <button class="btn btn-primary btn-lg" style="border-radius: 999px; padding: 20px 32px; box-shadow: 0 10px 30px rgba(107, 70, 193, 0.3);" onclick="createNewShipment()">
                    ‚ûï Add New Shipment
                </button>
            </div>
        </main>
    </div>

    <!-- Shipment Detail Modal -->
    <div class="shipment-detail-modal" id="shipmentModal">
        <div class="modal-content-detail">
            <button class="modal-close" onclick="closeShipmentModal()">‚úï</button>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Shipment Data
        const shipmentsData = {
            incoming: [
                {
                    id: "FIG-123",
                    origin: "Philippines",
                    destination: "Bangalore",
                    route: "Philippines to Bangalore",
                    via: "Via Singapore",
                    status: "Delayed",
                    priority: "High",
                    departure: "Nov 28",
                    eta: "Dec 5",
                    weight: "5.2 tons",
                    items: 450,
                    carrier: "Express Logistics",
                    trackingNumber: "EXP-2024-001234",
                    timeline: [
                        { step: "Shipment Created", date: "Nov 28, 10:30 AM", completed: true, active: false },
                        { step: "Picked Up", date: "Nov 28, 2:15 PM", completed: true, active: false },
                        { step: "In Transit - Singapore", date: "Dec 1, 5:45 PM", completed: true, active: true },
                        { step: "Customs Clearance", date: "Dec 3, pending", completed: false, active: false },
                        { step: "Out for Delivery", date: "Dec 5, pending", completed: false, active: false },
                        { step: "Delivered", date: "Dec 5, pending", completed: false, active: false }
                    ],
                    documents: ["Bill of Lading", "Commercial Invoice", "Packing List"],
                    cost: "$2,450"
                },
                {
                    id: "FIG-124",
                    origin: "Mumbai",
                    destination: "Chennai",
                    route: "Mumbai to Chennai",
                    via: "Direct Route",
                    status: "On Time",
                    priority: "High",
                    departure: "Dec 1",
                    eta: "Dec 3",
                    weight: "8.5 tons",
                    items: 320,
                    carrier: "Speed Cargo",
                    trackingNumber: "SPC-2024-005678",
                    timeline: [
                        { step: "Shipment Created", date: "Dec 1, 8:00 AM", completed: true, active: false },
                        { step: "Picked Up", date: "Dec 1, 10:30 AM", completed: true, active: false },
                        { step: "In Transit", date: "Dec 2, 6:00 AM", completed: true, active: true },
                        { step: "Arrived at Destination", date: "Dec 3, pending", completed: false, active: false },
                        { step: "Delivered", date: "Dec 3, pending", completed: false, active: false }
                    ],
                    documents: ["Bill of Lading", "Invoice"],
                    cost: "$1,850"
                },
                {
                    id: "FIG-125",
                    origin: "Delhi",
                    destination: "Kolkata",
                    route: "Delhi to Kolkata",
                    via: "Via Lucknow",
                    status: "On Time",
                    priority: "Normal",
                    departure: "Dec 2",
                    eta: "Dec 4",
                    weight: "3.8 tons",
                    items: 210,
                    carrier: "Standard Logistics",
                    trackingNumber: "STD-2024-009012",
                    timeline: [
                        { step: "Shipment Created", date: "Dec 2, 7:00 AM", completed: true, active: false },
                        { step: "Picked Up", date: "Dec 2, 9:15 AM", completed: true, active: false },
                        { step: "In Transit - Lucknow", date: "Dec 2, 8:00 PM", completed: true, active: true },
                        { step: "In Transit - Kolkata Route", date: "Dec 3, pending", completed: false, active: false },
                        { step: "Delivered", date: "Dec 4, pending", completed: false, active: false }
                    ],
                    documents: ["Bill of Lading", "Packing List"],
                    cost: "$950"
                },
                {
                    id: "FIG-126",
                    origin: "Singapore",
                    destination: "Bangalore",
                    route: "Singapore to Bangalore",
                    via: "Air Freight",
                    status: "Delayed",
                    priority: "High",
                    departure: "Dec 3",
                    eta: "Dec 6",
                    weight: "2.1 tons",
                    items: 180,
                    carrier: "Air Cargo International",
                    trackingNumber: "ACI-2024-003456",
                    timeline: [
                        { step: "Shipment Created", date: "Dec 3, 12:00 PM", completed: true, active: false },
                        { step: "At Singapore Airport", date: "Dec 3, 3:00 PM", completed: true, active: false },
                        { step: "Flight Delayed", date: "Dec 4, 10:00 AM", completed: true, active: true },
                        { step: "In Flight", date: "Dec 4, pending", completed: false, active: false },
                        { step: "At Bangalore Airport", date: "Dec 5, pending", completed: false, active: false },
                        { step: "Delivered", date: "Dec 6, pending", completed: false, active: false }
                    ],
                    documents: ["Air Waybill", "Commercial Invoice"],
                    cost: "$3,200"
                },
                {
                    id: "FIG-127",
                    origin: "Hyderabad",
                    destination: "Pune",
                    route: "Hyderabad to Pune",
                    via: "Road Transport",
                    status: "On Time",
                    priority: "Low",
                    departure: "Dec 4",
                    eta: "Dec 7",
                    weight: "12.5 tons",
                    items: 640,
                    carrier: "Ground Logistics",
                    trackingNumber: "GRL-2024-007890",
                    timeline: [
                        { step: "Shipment Created", date: "Dec 4, 6:00 AM", completed: true, active: false },
                        { step: "Picked Up", date: "Dec 4, 8:30 AM", completed: true, active: false },
                        { step: "In Transit", date: "Dec 5, 4:00 PM", completed: true, active: true },
                        { step: "Approaching Destination", date: "Dec 6, pending", completed: false, active: false },
                        { step: "Delivered", date: "Dec 7, pending", completed: false, active: false }
                    ],
                    documents: ["Consignment Note", "Packing List"],
                    cost: "$1,200"
                }
            ],
            outgoing: [
                {
                    id: "OUT-201",
                    origin: "Bangalore",
                    destination: "Philippines",
                    route: "Bangalore to Philippines",
                    via: "Via Singapore",
                    status: "On Time",
                    priority: "Normal",
                    departure: "Dec 3",
                    eta: "Dec 8",
                    weight: "6.3 tons",
                    items: 380,
                    carrier: "Express Logistics",
                    trackingNumber: "EXP-2024-011234",
                    timeline: [
                        { step: "Shipment Prepared", date: "Dec 3, 9:00 AM", completed: true, active: false },
                        { step: "Picked Up", date: "Dec 3, 11:00 AM", completed: true, active: false },
                        { step: "In Transit - Singapore", date: "Dec 4, 5:00 PM", completed: true, active: true },
                        { step: "Customs Clearance", date: "Dec 6, pending", completed: false, active: false },
                        { step: "Out for Delivery", date: "Dec 8, pending", completed: false, active: false }
                    ],
                    documents: ["Export Declaration", "Invoice"],
                    cost: "$2,100"
                },
                {
                    id: "OUT-202",
                    origin: "Chennai",
                    destination: "Mumbai",
                    route: "Chennai to Mumbai",
                    via: "Direct Route",
                    status: "Dispatched",
                    priority: "High",
                    departure: "Dec 2",
                    eta: "Dec 4",
                    weight: "9.2 tons",
                    items: 450,
                    carrier: "Speed Cargo",
                    trackingNumber: "SPC-2024-013456",
                    timeline: [
                        { step: "Shipment Prepared", date: "Dec 2, 7:00 AM", completed: true, active: false },
                        { step: "Dispatched", date: "Dec 2, 10:00 AM", completed: true, active: true },
                        { step: "In Transit", date: "Dec 3, pending", completed: false, active: false },
                        { step: "Arrived at Mumbai", date: "Dec 4, pending", completed: false, active: false }
                    ],
                    documents: ["Consignment Note", "Invoice"],
                    cost: "$1,950"
                },
                {
                    id: "OUT-203",
                    origin: "Kolkata",
                    destination: "Delhi",
                    route: "Kolkata to Delhi",
                    via: "Rail Transport",
                    status: "Preparing",
                    priority: "Normal",
                    departure: "Dec 5",
                    eta: "Dec 7",
                    weight: "15.8 tons",
                    items: 720,
                    carrier: "Rail Logistics",
                    trackingNumber: "RLG-2024-015678",
                    timeline: [
                        { step: "Shipment Prepared", date: "Dec 4, 3:00 PM", completed: true, active: false },
                        { step: "Ready for Dispatch", date: "Dec 5, 8:00 AM", completed: true, active: true },
                        { step: "In Transit", date: "Dec 5, pending", completed: false, active: false },
                        { step: "Delivered", date: "Dec 7, pending", completed: false, active: false }
                    ],
                    documents: ["Railway Receipt", "Packing List"],
                    cost: "$2,350"
                }
            ]
        };

        let currentFilter = 'all';

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadShipments('incoming');
            loadShipments('outgoing');
        });

        function loadShipments(type) {
            const tableId = type === 'incoming' ? 'incomingTable' : 'outgoingTable';
            const table = document.getElementById(tableId);
            const shipments = shipmentsData[type];

            table.innerHTML = shipments.map(shipment => `
                <tr class="shipment-row" onclick="viewShipmentDetail('${shipment.id}', '${type}')">
                    <td><strong>${shipment.id}</strong></td>
                    <td>
                        <div><strong>${shipment.route}</strong></div>
                        <div class="text-small text-muted">${shipment.via}</div>
                    </td>
                    <td><span class="badge ${shipment.status === 'Delayed' ? 'status-delayed' : 'status-on-time'}">${shipment.status}</span></td>
                    <td><span class="badge ${getPriorityClass(shipment.priority)}">${shipment.priority}</span></td>
                    <td>${shipment.departure}</td>
                    <td>${shipment.eta}</td>
                    <td onclick="event.stopPropagation()">
                        <div class="table-actions">
                            <button class="btn btn-sm btn-outline" onclick="viewShipmentDetail('${shipment.id}', '${type}')">View</button>
                            <button class="btn btn-sm btn-primary" onclick="trackShipment('${shipment.id}')">Track</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function getPriorityClass(priority) {
            if (priority === 'High') return 'priority-high';
            if (priority === 'Normal') return 'priority-normal';
            return 'priority-low';
        }

        function viewShipmentDetail(shipmentId, type) {
            const allShipments = [...shipmentsData.incoming, ...shipmentsData.outgoing];
            const shipment = allShipments.find(s => s.id === shipmentId);
            if (!shipment) return;

            const modal = document.getElementById('shipmentModal');
            const content = document.getElementById('modalContent');

            content.innerHTML = `
                <div style="margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid #e5e7eb;">
                    <h2 style="margin-bottom: 8px;">${shipment.id}</h2>
                    <p class="text-muted">${shipment.route}</p>
                    <div style="margin-top: 12px;">
                        <span class="badge ${shipment.status === 'Delayed' ? 'status-delayed' : 'status-on-time'}" style="margin-right: 8px;">${shipment.status}</span>
                        <span class="badge ${getPriorityClass(shipment.priority)}">${shipment.priority} Priority</span>
                    </div>
                </div>

                <div class="status-timeline-info">
                    <strong>üìç Current Status:</strong> ${shipment.status === 'Delayed' ? '‚ö†Ô∏è Delayed - Contact carrier for updates' : '‚úÖ On Schedule'}
                </div>

                <div class="detail-section">
                    <div class="detail-label">Shipment Information</div>
                    <div class="detail-grid">
                        <div class="stat-box">
                            <div class="stat-box-label">Weight</div>
                            <div class="stat-box-value">${shipment.weight}</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-label">Items</div>
                            <div class="stat-box-value">${shipment.items}</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-label">Carrier</div>
                            <div class="stat-box-value">${shipment.carrier}</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-label">Cost</div>
                            <div class="stat-box-value">${shipment.cost}</div>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <div class="detail-label">Tracking Number</div>
                    <div style="background: #f9fafb; padding: 12px; border-radius: 8px; font-family: monospace; word-break: break-all;">
                        ${shipment.trackingNumber}
                    </div>
                </div>

                <div class="detail-section">
                    <div class="detail-label">Shipment Timeline</div>
                    <div class="shipment-timeline">
                        ${shipment.timeline.map((step, idx) => `
                            <div class="timeline-step ${step.completed ? 'completed' : ''} ${step.active ? 'active' : ''}">
                                <div class="timeline-dot">
                                    ${step.completed ? '‚úì' : step.active ? '‚Üí' : idx + 1}
                                </div>
                                <div class="timeline-content">
                                    <div class="timeline-title">${step.step}</div>
                                    <div class="timeline-time">${step.date}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="detail-section">
                    <div class="detail-label">Documents</div>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        ${shipment.documents.map(doc => `
                            <div style="padding: 12px; background: #f9fafb; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                                <span>üìÑ ${doc}</span>
                                <button class="btn btn-sm btn-outline">Download</button>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn btn-primary" style="flex: 1;" onclick="contactCarrier('${shipment.id}')">
                        üìû Contact Carrier
                    </button>
                    <button class="btn btn-outline" style="flex: 1;" onclick="updateShipmentStatus('${shipment.id}')">
                        ‚úèÔ∏è Update Status
                    </button>
                    <button class="btn btn-outline" style="flex: 1;" onclick="shareShipment('${shipment.id}')">
                        üì§ Share
                    </button>
                </div>
            `;

            modal.classList.add('active');
        }

        function closeShipmentModal() {
            document.getElementById('shipmentModal').classList.remove('active');
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(button => {
                button.classList.remove('active');
            });

            if (tabName === 'incoming') {
                document.getElementById('incoming-tab').classList.add('active');
                document.querySelectorAll('.tab')[0].classList.add('active');
            } else {
                document.getElementById('outgoing-tab').classList.add('active');
                document.querySelectorAll('.tab')[1].classList.add('active');
            }
        }

        function filterShipments(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-pill').forEach(pill => {
                pill.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function applyFilters() {
            showNotification('Filters applied successfully', 'success');
        }

        function trackShipment(shipmentId) {
            const allShipments = [...shipmentsData.incoming, ...shipmentsData.outgoing];
            const shipment = allShipments.find(s => s.id === shipmentId);
            showNotification(`Tracking ${shipment.id}...`, 'success');
        }

        function contactCarrier(shipmentId) {
            showNotification('Opening carrier contact options...', 'success');
            closeShipmentModal();
        }

        function updateShipmentStatus(shipmentId) {
            showNotification(`Status update form for ${shipmentId}`, 'success');
        }

        function shareShipment(shipmentId) {
            showNotification(`Share link copied for ${shipmentId}`, 'success');
        }

        function createNewShipment() {
            showNotification('Opening new shipment creation form...', 'success');
        }

        function showNotification(msg, type) {
            const notif = document.createElement('div');
            notif.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#22c55e' : '#ef4444'};
                color: white;
                padding: 16px 24px;
                border-radius: 8px;
                z-index: 10000;
                animation: slideIn 0.3s ease;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            notif.textContent = msg;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), 3000);
        }
    </script>
</body>
</html>